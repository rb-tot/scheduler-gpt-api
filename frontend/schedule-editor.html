<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Editor - SchedulerGPT</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/schedule-editor.css">
</head>
<body>
    <div class="container">
        <header class="editor-header">
            <h1>üìÖ Interactive Schedule Editor</h1>
            <div class="header-actions">
                <button id="undo-btn" class="btn-secondary" disabled>‚Ü∂ Undo</button>
                <button id="redo-btn" class="btn-secondary" disabled>‚Ü∑ Redo</button>
                <button id="save-btn" class="btn-primary">üíæ Save Changes</button>
                <button id="cancel-btn" class="btn-danger">‚ùå Cancel</button>
            </div>
        </header>

        <div class="editor-controls">
            <div class="control-group">
                <label>Technician:</label>
                <select id="tech-select" class="form-control">
                    <option value="">Select Technician...</option>
                </select>
            </div>
            <div class="control-group">
                <label>Week Starting:</label>
                <input type="date" id="week-start" class="form-control" />
            </div>
            <button id="load-schedule" class="btn-primary">Load Schedule</button>
        </div>

        <div class="schedule-container">
            <!-- Left Panel: Available Jobs -->
            <div class="jobs-panel">
                <div class="panel-header">
                    <h3>Available Jobs</h3>
                    <input type="text" id="job-search" placeholder="Search jobs..." class="search-box" />
                    <div class="filter-controls">
                        <label><input type="checkbox" id="filter-urgent"> Urgent Only</label>
                        <label><input type="checkbox" id="filter-night"> Night Jobs</label>
                        <select id="filter-region" class="form-control-sm">
                            <option value="">All Regions</option>
                            <option value="CO">Colorado</option>
                            <option value="UT">Utah</option>
                            <option value="AZ">Arizona</option>
                        </select>
                    </div>
                </div>
                <div id="available-jobs" class="job-list">
                    <!-- Jobs will be populated here -->
                </div>
            </div>

            <!-- Center: Calendar View -->
            <div class="calendar-panel">
                <div class="calendar-header">
                    <button id="prev-week" class="nav-btn">‚óÄ</button>
                    <span id="week-range">Loading...</span>
                    <button id="next-week" class="nav-btn">‚ñ∂</button>
                </div>
                <div class="calendar-grid">
                    <div class="time-column">
                        <div class="time-header">Time</div>
                        <div class="time-slot">6:00 AM</div>
                        <div class="time-slot">7:00 AM</div>
                        <div class="time-slot">8:00 AM</div>
                        <div class="time-slot">9:00 AM</div>
                        <div class="time-slot">10:00 AM</div>
                        <div class="time-slot">11:00 AM</div>
                        <div class="time-slot">12:00 PM</div>
                        <div class="time-slot">1:00 PM</div>
                        <div class="time-slot">2:00 PM</div>
                        <div class="time-slot">3:00 PM</div>
                        <div class="time-slot">4:00 PM</div>
                        <div class="time-slot">5:00 PM</div>
                        <div class="time-slot">6:00 PM</div>
                        <div class="time-slot">7:00 PM</div>
                        <div class="time-slot">8:00 PM</div>
                    </div>
                    <div class="day-column" data-day="0">
                        <div class="day-header">Monday</div>
                        <div class="day-schedule" id="monday-schedule"></div>
                    </div>
                    <div class="day-column" data-day="1">
                        <div class="day-header">Tuesday</div>
                        <div class="day-schedule" id="tuesday-schedule"></div>
                    </div>
                    <div class="day-column" data-day="2">
                        <div class="day-header">Wednesday</div>
                        <div class="day-schedule" id="wednesday-schedule"></div>
                    </div>
                    <div class="day-column" data-day="3">
                        <div class="day-header">Thursday</div>
                        <div class="day-schedule" id="thursday-schedule"></div>
                    </div>
                    <div class="day-column" data-day="4">
                        <div class="day-header">Friday</div>
                        <div class="day-schedule" id="friday-schedule"></div>
                    </div>
                    <div class="day-column" data-day="5">
                        <div class="day-header">Saturday</div>
                        <div class="day-schedule" id="saturday-schedule"></div>
                    </div>
                    <div class="day-column" data-day="6">
                        <div class="day-header">Sunday</div>
                        <div class="day-schedule" id="sunday-schedule"></div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Job Details -->
            <div class="details-panel">
                <h3>Job Details</h3>
                <div id="job-details" class="job-details-content">
                    <p class="placeholder">Select a job to view details</p>
                </div>
                <div class="capacity-info">
                    <h4>Daily Capacity</h4>
                    <div id="daily-capacity"></div>
                    <h4>Weekly Summary</h4>
                    <div id="weekly-summary"></div>
                </div>
            </div>
        </div>

        <!-- Conflict Resolution Modal -->
        <div id="conflict-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚ö†Ô∏è Schedule Conflict Detected</h2>
                    <span class="close-modal">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="conflict-details"></div>
                    <div class="conflict-actions">
                        <button id="force-schedule" class="btn-warning">Override Conflict</button>
                        <button id="resolve-conflict" class="btn-primary">Suggest Resolution</button>
                        <button id="cancel-move" class="btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/schedule-editor.js"></script>
</body>
</html>