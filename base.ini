import os
from fastapi import FastAPI, HTTPException
import httpx
from dotenv import load_dotenv

# ─── Load environment ──────────────────────────────────────────────
load_dotenv()  # loads .env in current directory

SUPABASE_URL = os.getenv("SUPABASE_URL")
SUPABASE_KEY = os.getenv("SUPABASE_KEY")
if not (SUPABASE_URL and SUPABASE_KEY):
    raise RuntimeError("Set SUPABASE_URL and SUPABASE_KEY in .env")

HEADERS = {
    "apikey":        SUPABASE_KEY,
    "Authorization": f"Bearer {SUPABASE_KEY}",
    "Content-Type":  "application/json",
}

# Build a small FastAPI app with one working endpoint:
app = FastAPI(title="Supabase Test API")